<section class="forms-container">

  
  <div *ngIf="isLoadingGoals" class="loading-circle">
    <div class="spinner"></div>
    <p>A carregar Metas...</p>
  </div>

  <div class="selectOptionContainer">
    <div class="overflow-x-auto relative">
      <table *ngIf="!isLoadingGoals" class="user-table min-w-full bg-white">

        <thead class="bg-main-blue text-fill-white">
          <tr>
            <th class="w-1/3 p-2">Nome do Indicador</th>
            <th class="w-1/3 p-2">Meta anual</th>
            <th class="w-1/3 p-2">Ação</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngIf="isLoading">
            <td colspan="3" class="relative">
              <div class="loading-circle">
                <div class="spinner"></div>
              </div>
            </td>
          </tr>
          <ng-container *ngIf="!isLoading">
            <tr *ngFor="let goal of goals; trackBy: trackByIndex" class="hover:bg-gray-100">
              <td class="p-2">{{ goal.indicatorName }}</td>

              <td class="p-2">
            
                  <form>   
                    <input [disabled]="goal.isInserted" class="inputContainer--input w-full p-2 border border-gray-300 rounded"
                    [(ngModel)]="goal.target_value" (ngModelChange)="onValueChange(goal)" name="goalValue">
                  </form>
      
              </td>


              <td class="p-2 text-center">
                <button *ngIf="!goal.isUpdating" (click)="UpdateGoal(goal)" class="forms-Button bg-main-blue text-white px-4 py-2 rounded disabled:opacity-50"
                  type="button">
                  {{ !goal.isInserted ? 'Atualizar' : 'Editar' }} 
                </button>
                <div *ngIf="goal.isUpdating" class="loading-circle">
                  <div class="spinner spinner_updateRecord-special"></div>
                </div>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</section>
