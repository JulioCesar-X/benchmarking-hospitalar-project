<div class="fixedCSS relative">
  <header class="navbar">
    <div class="logoSection">
      <div class="logoContainer">
        <img class="logo" src="../../../../assets/images/novoLogo.png" alt="Logo">
      </div>
      <div class="logoTitleContainer">
        <h3>Unidade local de Saúde</h3>
        <h1>Tâmega e Sousa</h1>
      </div>
    </div>

    <div class="navbarLinksContainer">
      <a routerLink="/home" class="navBarLink">Home</a>
      <a *ngIf="isLoggedIn() && getRole() === 'admin'" routerLinkActive="active-page" ariaCurrentWhenActive="page"
        routerLink="/consultUsers" class="navBarLink">Menu</a>
      <a *ngIf="isLoggedIn() && getRole() === 'coordenador'" routerLinkActive="active-page" ariaCurrentWhenActive="page"
        routerLink="/RecordGoalsUpdate" class="navBarLink">Menu</a>
      <div class="loginContainer">
      <a *ngIf="!isLoggedIn()" routerLink="/login" routerLinkActive="active-page" ariaCurrentWhenActive="page"
          class="navBarLink">Login</a>
          <div *ngIf="isLoggedIn()" class="relative " (mouseleave)="isDropdownOpen = false">
            <button class=" flex items-center gap-x-1" mat-button [matMenuTriggerFor]="menu" (click)="toggleDropdown()">
              <mat-icon>account_circle</mat-icon>
              <span class="text-xl">{{ getUserName() }}</span>
            </button>
            <mat-menu #menu="matMenu" class="menu-custom" [overlapTrigger]="false">
              <button mat-menu-item (click)="logout()">
                <mat-icon class="blue-custom">exit_to_app</mat-icon>
                <span class="blue-custom">Logout</span>
              </button>
            </mat-menu>
          </div>

        <button *ngIf="isLoggedIn()" (click)="toggleNotifications()" matBadgePosition="above after" mat-raised-button
          color="primary" [matBadge]="unreadNotifications" matBadgeColor="warn">
          <img src="../../../../assets/images/notificationIcon.png" class="icon" alt="Notifications icon">
        </button>
      </div>
    </div>
  </header>

  <div *ngIf="isNotificationsOpen"
    class="absolute top-10 right-5 text-left z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
    role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1">
    <div class="py-1" role="none">
      <h2 class="block mb-0 px-4 py-2 text-sm text-gray-700 blue-custom">Notifications</h2>
      <div *ngFor="let notification of allNotifications" (click)="markNotificationAsRead(notification)"
        class="px-4 mx-2 py-2 border-b border-gray-200 cursor-pointer" [class.unread]="!notification.isRead">
        <div class="flex items-center mb-1">
          <!-- <mat-icon class="mr-2">person</mat-icon> -->
          <p class="text-sm blue-custom">{{ notification.sender }}</p>
        </div>
        <div class="flex items-center mb-1">
          <!-- <mat-icon class="mr-2">title</mat-icon> -->
          <p class="text-sm blue-custom">{{ notification.title }}</p>
        </div>
        <div class="flex items-center">
          <!-- <mat-icon class="mr-2">event</mat-icon> -->
          <p class="text-sm blue-custom">{{ notification.created_at }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
