<!-- <app-create-field-modal [isVisible]="isModalVisible" (closeEvent)="closeModal()"></app-create-field-modal> -->
 
<app-notification [message]="notificationMessage" [type]="notificationType"></app-notification>

<form>
    <div [class.loading]="isLoadingIndicadores">
        <div class="flex flex-col justify-center w-[80%] max-w-500px p-8 rounded-xl gap-4 mx-auto my-4 forms-container" [ngClass]="{ 'forms-container__error': isError }">

              <h2 class="forms-container--title" *ngIf="formsAction === 'create'" >Criar atividade</h2>
              <h2 class="forms-container--title" *ngIf="formsAction === 'edit'" >Editar atividade</h2>

          
            <div class="flex flex-col items-start w-full whiteTxt">
              <label for="name">Nome atividade:</label>

              <input type="text" class="w-full rounded-md py-1 px-2 inputContainer--input" [(ngModel)]="selectedActivity.name" id="name" name="name" 
               [ngClass]="{ 'inputContainer--input__error': isError }" required>
            </div>

            
            <div class="flex flex-col items-start justify-between selectContainer">
              <label for="serviceId">Serviços:</label>
              <select id="serviceId" name="serviceId" class="w-full rounded-md py-1 px-2">
                <option *ngFor="let service of servicesList; let i = index;" [value]="service.id">
                  {{ service.service_name }}
                </option>
                <option *ngIf="isLoadingServices == true" disabled selected>A carregar serviços...</option>
                <option *ngIf="servicesList && servicesList.length === 0 && isLoadingServices == false" disabled>No services available</option>
              </select>
            </div>

            <div class="flex flex-col w-full min-h-[50px] max-h-[300px] rounded-lg
            checkboxContainer">
              <h4 class="checkboxContainer-title">Associar indicadores:</h4>
        
              <div class="checkboxContainer--option" *ngFor="let indicator of indicatorsList; let i = index; trackBy: trackByIndex">
                <input class="styled-checkbox" type="checkbox"
                [checked]="isSelected(indicator.id)" 
                (click)="toggleSelection(indicator.id)">
                <label>{{ indicator.indicator_name }}</label>
              </div>


              <div class="loading-circle" *ngIf="isLoadingIndicadores">
                <div class="spinner"></div>
                <p>A carregar indicadores..</p>
              </div>
            </div>
          
            <button (click)="formSubmited()" type="submit" class="self-end w-1/2 rounded-xl py-1 forms-Button">Confirmar</button>
        </div>
    </div>
</form>
