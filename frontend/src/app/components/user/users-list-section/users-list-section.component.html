<app-notification
  [message]="notificationMessage"
  [type]="notificationType"
></app-notification>

<section class="w-full p-0 rounded-xl gap-4 mx-auto my-2 forms-container">
  <!-- forms-container -->
  <div *ngIf="isLoading" class="loading-circle">
    <div class="spinner"></div>
    <p>A carregar users...</p>
  </div>

  <div *ngIf="!isLoading" >
    <table class="w-[90%] mx-auto user-table rounded-xl">
      <thead class="bg-gray-100 sticky top-[-2px] z-120">
        <tr class="">
          <th class="p-2">Nome</th>
          <th class="p-2 sm:px-4 hidden md:table-cell">Email</th>
          <th class="p-2">Role</th>
          <th class="p-2">Opções</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="
            let user of allUsers;
            let i = index;
            trackBy: trackByIndex
          "
          class="hover:bg-gray-50"
        >
          <td class="border p-2">{{ user.name }}</td>
          <td class="border p-2 sm:px4 hidden md:table-cell">
            {{ user.email }}
          </td>
          <td class="border p-2">{{ user.roles[0]?.role_name }}</td>
          <td class="border p-2 flex justify-center space-x-4">
            <img
              src="../../../assets/images/pencil-96.png"
              class="w-5 h-5 cursor-pointer"
              alt="Edit"
              (click)="editUser(user)"
            />
            <img
              src="../../../assets/images/trash-96.png"
              class="w-5 h-5 cursor-pointer"
              alt="Delete"
              (click)="openModal(user)"
            />
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>
<mat-paginator
#paginator
class="demo-paginator"
(page)="handlePageEvent($event)"
[length]="length"
[pageSize]="pageSize"
[disabled]="disabled"
[showFirstLastButtons]="showFirstLastButtons"
[pageSizeOptions]="showPageSizeOptions ? pageSizeOptions : []"
[hidePageSize]="hidePageSize"
[pageIndex]="pageIndex"
aria-label="Select page">
>
</mat-paginator>

<!-- MODAL -->
<div class="modal" [ngClass]="{ show: isModalOpen }" (click)="closeModal()">
  <div
    class="modal-container"
    (click)="$event.stopPropagation()"
    [ngClass]="{ 'forms-container__error': isError }"
  >
    <div class="modalHeader">
      <h2>Tem a certeza que quer remover este user?</h2>
      <span class="close" (click)="closeModal()">&times;</span>
    </div>
    <div *ngIf="isDeletingUser" class="loading-circle_forBlueBG">
      <div class="spinner_forBlueBG"></div>
      <p>A remover user...</p>
    </div>

    <button
      (click)="formSubmited()"
      type="submit"
      class="self-end w-1/2 rounded-xl py-1 forms-Button"
    >
      Confirmar
    </button>
  </div>
</div>
