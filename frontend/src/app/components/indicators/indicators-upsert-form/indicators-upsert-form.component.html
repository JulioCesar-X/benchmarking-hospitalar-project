

<app-notification [message]="notificationMessage" [type]="notificationType"></app-notification>
<form>
  <div class="flex flex-col justify-center w-[80%] max-w-500px p-8 rounded-xl gap-4 mx-auto my-4 forms-container" [ngClass]="{ 'forms-container__error': isError }">

    <h2 class="whiteTxt" *ngIf="formsAction === 'create'" >Criar indicador</h2>
    <h2 class="whiteTxt" *ngIf="formsAction === 'edit'" >Editar indicador</h2>
    
    <div class="flex flex-col items-start w-full whiteTxt">
      <label for="name">Nome:</label>
      <input type="text" class="w-full rounded-md py-1 px-2 inputContainer--input" [ngClass]="{ 'inputContainer--input__error': isError }"
      [(ngModel)]="selectedIndicator.name" id="name" name="name" placeholder="Name" required>
      <span class="errorSpanMessage"></span>
    </div>

    <div class="flex flex-col items-start justify-between selectContainer"><!-- *ngIf="!isLoading || notificationType === 'error'" -->
      <label for="service">Serviço:</label>
      <select class="w-full rounded-md py-1 px-2" [(ngModel)]="selectedIndicator.service_id" id="service" name="serviceId" required>
        <option *ngFor="let service of services" [value]="service.id">{{service.service_name}}</option>
        <option *ngIf="isLoadingServices == true" disabled selected>A carregar serviços...</option>
        <option *ngIf="services && services.length === 0 && isLoadingServices == false" disabled>No services available</option>
      </select>
    </div>

    <div class="flex flex-col items-start justify-between selectContainer"> <!-- *ngIf="!isLoading || notificationType === 'error'" -->
      <label for="activity">Atividade:</label>
      <select class="w-full rounded-md py-1 px-2" [(ngModel)]="selectedIndicator.activity_id" id="activity" name="activity" required>
        <option *ngFor="let activity of activities" [value]="activity.id">{{activity.activity_name}}</option>
        <option *ngIf="isLoadingAtividades == true" disabled selected>A carregar atividades...</option>
        <option *ngIf="services && services.length === 0 && isLoadingAtividades == false" disabled>No services available</option>
        <option value="none">None</option>
      </select>
    </div>

    <div class="flex flex-col items-start justify-between selectContainer"> <!-- *ngIf="!isLoading || notificationType === 'error'" -->
      <label for="type">Tipo:</label>
      <select class="w-full rounded-md py-1 px-2" [(ngModel)]="selectedIndicator.type" id="type" name="type" required>
        <option value="produção">Produção</option>
        <option value="desempenho">Desempenho</option>
        <option value="financeiro">Financeiro</option>
      </select>
    </div>

    <div class="flex flex-col items-start w-full whiteTxt">
      <label for="meta">Meta:</label>
      <input type="text" class="w-full rounded-md py-1 px-2 inputContainer--input" [(ngModel)]="goalTargetValue"
      id="meta" name="meta" placeholder="Meta anual" required>
      <span class="errorSpanMessage"></span>
    </div>

    <button type="submit" class="forms-Button" (click)="formSubmited()">Atualizar</button>
  </div>
</form>
